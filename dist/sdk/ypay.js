(()=>{function t(t,e,r,a){Object.defineProperty(t,e,{get:r,set:a,enumerable:!0,configurable:!0})}var e=globalThis,r={},a={},i=e.parcelRequire44b2;null==i&&((i=function(t){if(t in r)return r[t].exports;if(t in a){var e=a[t];delete a[t];var i={id:t,exports:{}};return r[t]=i,e.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){a[t]=e},e.parcelRequire44b2=i);var n=i.register;n("kJVSJ",function(e,r){t(e.exports,"default",()=>n);var a=i("4x2qo"),n=class{constructor(t="",e="",r="",a=0,i="en",n={}){this.sender=this.sanitizeData(e),this.token=this.sanitizeData(t),this.otp=r,this.amount=parseFloat(a.toString()),this.language=i,this.paymentHandlers={onSuccess:n.onSuccess||(()=>{}),onFailure:n.onFailure||(()=>{})};const s=this._validate();s&&(this.validationError=s)}_validate(){let t=[];return this.sender?a.cardPattern.test(this.sender)||t.push("Sender card format is invalid."):t.push("Sender card is required."),this.token?a.tokenPattern.test(this.token)||t.push("token card format is invalid."):t.push("token is required."),this.otp?a.paymentCodePattern.test(this.otp)||t.push("Payment code format is invalid."):t.push("Payment code is required."),(isNaN(this.amount)||this.amount<=0)&&t.push("Amount must be a positive number."),["en","fr"].includes(this.language.toString().toLowerCase())||t.push("Language is invalid."),t.length>0?Error(t.join("\n")):null}async exec(){if(this.validationError)throw this.paymentHandlers.onFailure(this.validationError),this.validationError;try{let t=await fetch("https://ypay.ytech-bf.com/api/v1/project/make-payment",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`,"accept-language":this.language},body:JSON.stringify({card_code:this.sender,amount:this.amount,payment_code:this.otp})});if(t.ok){let e=await t.json();return this.paymentHandlers.onSuccess(e),e}let e=(await t.json().catch(()=>({}))).message||t.statusText||"Payment failed";throw Error(`${t.status}
${e}`)}catch(t){throw this.paymentHandlers.onFailure(t),t}}isValid(){return!this.validationError}getValidationErrors(){return this.validationError?this.validationError.message:null}sanitizeData(t=""){return""===t||null==t?"":t=(t=(t=(t=String(t)).replace(/\\0/g,"")).trim()).replace(/<[^>]*>/g,"")}}}),n("4x2qo",function(e,r){t(e.exports,"cardPattern",()=>a),t(e.exports,"paymentCodePattern",()=>i),t(e.exports,"tokenPattern",()=>n);let a=/^[A-Za-z0-9]{4}-[A-Za-z0-9]{4}$/,i=/^[0-9]{6}$/,n=/^[0-9]{1,}\|[A-Za-z0-9]{48}$/}),n("jAYAm",function(e,r){t(e.exports,"Currency",()=>a);class a{static USD="USD";static NGN="NGN";static XOF="F CFA";static isValid(t){return Object.values(this).includes(t.toUpperCase())}}}),i("kJVSJ"),i("jAYAm")})();